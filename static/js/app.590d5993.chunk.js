(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{243:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return te}));var a=n(345),r=n(346),i=n(344),o=n(0),d=n.n(o),l=n(5),s=n(6),c=n(27),u=n(64),f=n(57),h=n(67),b=n(342),j=n(8),m=[{label:"best",icon:"rocket"},{label:"hot",icon:"fire"},{label:"new",icon:"sun"},{label:"top",icon:"arrow-up"}],g=["today","week","month","year","all"],p=function(e){var t=e.text,n=e.onPress,a=e.selected,r=e.icon;return Object(j.jsx)(s.default,{style:{backgroundColor:a?"#495057":void 0,paddingHorizontal:10,borderRadius:15,paddingVertical:5,marginLeft:void 0==r?10:void 0},children:Object(j.jsxs)(h.default,{onPress:n,style:y.btn,children:[r&&Object(j.jsx)(b.default,{name:r,size:20,color:"#fff"}),Object(j.jsx)(c.default,{style:y.btnTxt,children:t})]})})},x=function(e){var t=e.onPress,n=e.selected,a=e.show,r=e.setShow,i=e.filter,o=e.setFilter;return Object(j.jsxs)(s.default,{style:y.container,children:[Object(j.jsxs)(s.default,{style:y.btnContainer,children:[m.map((function(e){return Object(j.jsx)(p,{icon:e.icon,onPress:function(){return t(e.label)},selected:n==e.label,text:e.label},e.label)})),"top"==n&&Object(j.jsx)(p,{text:i,onPress:function(){return r((function(e){return!e}))},selected:!0,icon:void 0})]}),a&&Object(j.jsx)(s.default,{style:y.filterContainer,children:g.map((function(e){return Object(j.jsx)(p,{text:e,onPress:function(){o(e),r(!1)},selected:i==e},e)}))})]})},y=l.default.create({container:{alignSelf:"center",paddingHorizontal:10,maxWidth:600,minHeight:45,maxHeight:100,minWidth:400},btnContainer:{flexDirection:"row",justifyContent:"space-between",backgroundColor:"#212529",alignItems:"center",paddingHorizontal:10,borderRadius:5,flex:1},subreddit:{fontSize:18,fontWeight:"600",textTransform:"capitalize",color:"#fff"},filterContainer:{flexDirection:"row",marginLeft:20,position:"absolute",zIndex:100,top:50,backgroundColor:"#212529",padding:5,borderRadius:10,borderWidth:1,borderColor:"#f5f5f5"},btnTxt:{fontWeight:"600",color:"#fff",fontSize:18,marginLeft:5,textTransform:"capitalize"},btn:{flexDirection:"row",alignItems:"center",justifyContent:"center"}}),O=n(44),v=n(114),S=n(343),w=n(35),C=n(347),P=n(79);function z(e){var t=Math.floor(((new Date).getTime()-new Date(1e3*e).getTime())/1e3),n=t/31536e3;return n>1?Math.floor(n)+" years":(n=t/2592e3)>1?Math.floor(n)+" months":(n=t/86400)>1?Math.floor(n)+" days":(n=t/3600)>1?Math.floor(n)+" hours":(n=t/60)>1?Math.floor(n)+" minutes":Math.floor(t)+" seconds"}var k=d.a.memo((function(e){var t=e.item,n=e.pressable,a=void 0===n||n,r=Object(w.useNavigation)(),i=t.data.thumbnail,o=2;t.data.preview&&(i=t.data.preview.images[0].source.url,o=t.data.preview.images[0].source.width/t.data.preview.images[0].source.height);var l="";t.data.secure_media&&t.data.secure_media.reddit_video&&(l=t.data.secure_media.reddit_video.fallback_url,a||(o=t.data.secure_media.reddit_video.width/t.data.secure_media.reddit_video.height));var u=d.a.useCallback((function(e){return r.navigate("Details",{id:e.data.id,subreddit:e.data.subreddit,title:e.data.title.replaceAll(" ","_")})}),[]),f="";t.data.secure_media_embed&&t.data.secure_media_embed.content&&t.data.secure_media_embed.content.split(" ").forEach((function(e){e.includes("src")&&(f=e.split('"')[1])}));return console.log(f),Object(j.jsxs)(s.default,{style:[R.container,{width:a?void 0:"90%",maxWidth:a?600:1e3}],children:[Object(j.jsxs)(s.default,{style:{flexDirection:"row",marginBottom:10},children:[Object(j.jsxs)(c.default,{style:{color:"#fff",fontSize:15},onPress:function(){return r.navigate("SubReddit",{subreddit:t.data.subreddit})},children:["r/",t.data.subreddit]}),Object(j.jsx)(c.default,{style:{color:"#fff",fontSize:15},children:" \u2022 "}),Object(j.jsxs)(c.default,{style:{color:"#fff",fontSize:15},onPress:function(){return r.navigate("User",{user:t.data.author})},children:["u/",t.data.author]}),Object(j.jsxs)(c.default,{style:{color:"#fff",fontSize:15},children:[" ",z(t.data.created_utc)]})]}),Object(j.jsx)(h.default,{onPress:function(){return a&&u(t)},activeOpacity:a?.6:1,children:Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(c.default,{style:R.title,ellipsizeMode:"tail",numberOfLines:2,children:t.data.title}),Object(j.jsx)(c.default,{style:{color:"#fff"},children:t.data.selftext}),(""==l||a)&&""!=i&&""==f&&Object(j.jsxs)(s.default,{style:{position:"relative"},children:[Object(j.jsx)(O.default,{source:{uri:encodeURI(i)},style:[R.image,{aspectRatio:o,maxHeight:a?500:700}]}),""!=l&&Object(j.jsx)(s.default,{style:R.playBtn,children:Object(j.jsx)(S.default,{name:"controller-play",size:90,color:"#fff"})})]}),""!=l&&!a&&Object(j.jsx)(C.default,{source:{uri:l},useNativeControls:!0,isLooping:!0,isMuted:!0,shouldPlay:!0,resizeMode:P.ResizeMode.CONTAIN,videoStyle:{aspectRatio:o,width:"100%",maxHeight:700},style:{aspectRatio:o,width:"100%",maxHeight:700}}),""!=f&&Object(j.jsx)("iframe",{style:{minWidth:400,maxWidth:600,aspectRatio:1.5},src:f,allowFullScreen:!0})]})}),t.data.url&&Object(j.jsx)(c.default,{style:{color:"#fff"},onPress:function(){return v.default.openURL(t.data.url)},children:t.data.url})]})})),R=l.default.create({container:{marginTop:20,alignSelf:"center",minWidth:400,backgroundColor:"#212529",padding:20,borderRadius:10},title:{fontWeight:"600",fontSize:17,marginBottom:10,color:"#fff"},image:{width:"100%",resizeMode:"contain",alignSelf:"flex-start"},playBtn:{position:"absolute",alignSelf:"center",justifyContent:"center",height:"100%"}}),W=n(14),_=n.n(W),T=n(10),L=n.n(T),F=n(54),M=function(e){var t=e.subreddit,n=e.filter,a=e.timeFilter;return Object(F.useInfiniteQuery)([t,n,a,"post"],function(){var e=L()((function*(e){var r=e.pageParam,i=void 0===r?"":r,o="https://www.reddit.com/r/"+t+"/"+n+"/.json?raw_json=1&count=25";"top"==n&&(o+="&sort=top&t="+a),""!=i&&(o=o+"&after="+i);var d=yield fetch(o);return(yield d.json()).data}));return function(t){return e.apply(this,arguments)}}(),{getNextPageParam:function(e){var t;return null!=(t=e.after)&&t},retry:1,select:function(e){return{pageParams:e.pageParams,pages:e.pages.flatMap((function(e){return e.children}))}},keepPreviousData:!1,refetchOnWindowFocus:!1})},N=n(87),I=function(e){var t,n=e.subreddit,a=d.a.useState("best"),r=_()(a,2),i=r[0],o=r[1],l=d.a.useState(!1),u=_()(l,2),h=u[0],b=u[1],m=d.a.useState("today"),g=_()(m,2),p=g[0],y=g[1],O=M({subreddit:n,filter:i,timeFilter:p}),v=O.data,S=O.hasNextPage,w=O.fetchNextPage,C=d.a.useCallback((function(e){var t=e.item;return Object(j.jsx)(k,{item:t})}),[]),P=d.a.useCallback((function(e){return e.data.id}),[]),z=d.a.useCallback((function(e){return o(e)}),[]);return Object(j.jsx)(f.default,{style:E.container,children:Object(j.jsx)(N.FlashList,{ListHeaderComponent:Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(c.default,{style:E.subreddit,children:n}),Object(j.jsx)(x,{selected:i,onPress:z,show:h,setShow:b,filter:p,setFilter:y}),Object(j.jsx)(s.default,{style:{marginTop:h?40:void 0}})]}),contentContainerStyle:E.contentContainer,data:null!=(t=null==v?void 0:v.pages)?t:[],estimatedItemSize:600,keyExtractor:P,renderItem:C,onEndReachedThreshold:.3,onEndReached:function(){S&&w()}})})},E=l.default.create({container:{flex:1,backgroundColor:"#343a40"},contentContainer:{paddingLeft:90,paddingRight:90,paddingBottom:90},subreddit:{textTransform:"capitalize",color:"#fff",fontWeight:"600",fontSize:26,minWidth:400,maxWidth:700,alignSelf:"center",marginVertical:10,paddingLeft:10}}),H=function(e){var t=e.id,n=e.subreddit,a=e.title;return Object(F.useQuery)([n,t,"comment"],L()((function*(){var e=yield fetch("https://www.reddit.com/r/"+n+"/comments/"+t+"/"+a+"/.json?raw_json=1"),r=yield e.json();return{post:r[0].data.children[0],comment:r[1].data.children}})))},D=function(e){var t=e.term;return Object(F.useInfiniteQuery)([t,"search"],function(){var e=L()((function*(e){var n=e.pageParam,a=void 0===n?"":n,r="https://www.reddit.com/subreddits/search.json?q="+t+"&raw_json=1&count=25";""!=a&&(r=r+"&after="+a);var i=yield fetch(r);return(yield i.json()).data}));return function(t){return e.apply(this,arguments)}}(),{getNextPageParam:function(e){var t;return null!=(t=e.after)&&t},retry:1,select:function(e){return{pageParams:e.pageParams,pages:e.pages.flatMap((function(e){return e.children}))}},keepPreviousData:!1})},B=function(e){var t=e.user,n=e.filter,a=e.timeFilter;return Object(F.useInfiniteQuery)([t,n,a,"user"],function(){var e=L()((function*(e){var r=e.pageParam,i=void 0===r?"":r,o="https://www.reddit.com/user/"+t+".json?raw_json=1&count=25";"top"==n&&(o+="&sort=top&t="+a),""!=i&&(o=o+"&after="+i);var d=yield fetch(o);return(yield d.json()).data}));return function(t){return e.apply(this,arguments)}}(),{getNextPageParam:function(e){var t;return null!=(t=e.after)&&t},retry:1,select:function(e){return{pageParams:e.pageParams,pages:e.pages.flatMap((function(e){return e.children}))}},keepPreviousData:!1})},Q=function(e){var t=e.route.params,n=t.id,a=t.subreddit,r=t.title,i=H({title:r,id:n,subreddit:a}),o=i.data,d=i.isLoading,l=function(e,t,n,a){return Object(j.jsxs)(s.default,{style:{marginLeft:t,marginTop:10},children:[Object(j.jsx)(c.default,{style:{color:"#fff",fontWeight:"600",fontSize:15},adjustsFontSizeToFit:!0,numberOfLines:1,children:n}),Object(j.jsx)(c.default,{style:{color:"#fff",marginTop:3},children:e})]},a)};return Object(j.jsx)(f.default,{style:U.container,children:!d&&Object(j.jsxs)(u.default,{contentContainerStyle:{paddingBottom:90},children:[Object(j.jsx)(k,{item:null==o?void 0:o.post,pressable:!1}),Object(j.jsxs)(s.default,{style:U.itemContainer,children:[Object(j.jsx)(c.default,{style:{fontSize:18,color:"#fff",fontWeight:"900"},children:"Comments"}),function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t&&0!=t.length?(t.forEach((function(t){n.push(l(t.data.body,a,t.data.author,t.data.author_fullname+t.data.name)),t.data.replies&&e(t.data.replies.data.children,n,a+=10)})),n):null}(null==o?void 0:o.comment,[],0)]})]})})},U=l.default.create({container:{flex:1,backgroundColor:"#343a40"},itemContainer:{marginTop:20,alignSelf:"center",minWidth:300,maxWidth:400,backgroundColor:"#212529",padding:20,borderRadius:10}}),V=function(){return Object(j.jsx)(I,{subreddit:"popular"})},A=n(123),J=function(){var e=d.a.useState("ios"),t=_()(e,2),n=t[0],a=t[1],r=D({term:n}),i=r.data,o=r.hasNextPage,l=r.fetchNextPage,u=Object(w.useNavigation)(),h=d.a.useCallback((function(e){var t=e.item;return Object(j.jsx)(s.default,{style:{marginTop:20,alignSelf:"center"},children:Object(j.jsx)(c.default,{style:q.title,onPress:function(){return u.navigate("SubReddit",{subreddit:t.data.display_name})},children:t.data.url})})}),[]),b=d.a.useCallback((function(e){return e.data.url}),[]);return Object(j.jsxs)(f.default,{style:q.container,children:[Object(j.jsx)(s.default,{style:{alignSelf:"center",marginTop:10},children:Object(j.jsx)(A.default,{style:q.input,placeholder:"Search Subreddit",onSubmitEditing:function(e){return a(e.nativeEvent.text)}})}),Object(j.jsx)(N.FlashList,{data:null==i?void 0:i.pages,contentContainerStyle:{paddingBottom:90},estimatedItemSize:50,keyExtractor:b,renderItem:h,onEndReachedThreshold:1.5,onEndReached:function(){return o&&n.length>0&&l()}})]})},q=l.default.create({container:{flex:1,backgroundColor:"#343a40"},input:{height:45,minWidth:400,maxWidth:600,backgroundColor:"#212529",paddingHorizontal:10,borderRadius:10,fontSize:18,color:"#fff"},title:{color:"#fff",minWidth:400,maxWidth:500,fontSize:18}}),G=function(e){var t=e.route.params.subreddit;return Object(j.jsx)(I,{subreddit:t})},K=function(e){var t,n=e.route.params.user,a=d.a.useState("best"),r=_()(a,2),i=r[0],o=r[1],l=d.a.useState(!1),u=_()(l,2),h=u[0],b=u[1],m=d.a.useState("today"),g=_()(m,2),p=g[0],y=g[1],O=B({user:n,filter:i,timeFilter:p}),v=O.data,S=O.hasNextPage,w=O.fetchNextPage,C=d.a.useCallback((function(e){var t=e.item;return Object(j.jsx)(k,{item:t})}),[]),P=d.a.useCallback((function(e){return e.data.id}),[]),z=d.a.useCallback((function(e){return o(e)}),[]);return Object(j.jsx)(f.default,{style:X.container,children:Object(j.jsx)(N.FlashList,{ListHeaderComponent:Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(c.default,{style:X.subreddit,children:n}),Object(j.jsx)(x,{selected:i,onPress:z,show:h,setShow:b,filter:p,setFilter:y}),Object(j.jsx)(s.default,{style:{marginTop:h?40:void 0}})]}),contentContainerStyle:X.contentContainer,data:null!=(t=null==v?void 0:v.pages)?t:[],estimatedItemSize:600,keyExtractor:P,renderItem:C,onEndReachedThreshold:.3,onEndReached:function(){S&&w()}})})},X=l.default.create({container:{flex:1,backgroundColor:"#343a40"},contentContainer:{paddingLeft:90,paddingRight:90,paddingBottom:90},subreddit:{textTransform:"capitalize",color:"#fff",fontWeight:"600",fontSize:26,minWidth:400,maxWidth:700,alignSelf:"center",marginVertical:10,paddingLeft:10}}),Y=Object(i.default)(),Z={prefixes:["https://iprabin.github.io"],config:{screens:{Home:"redditclone",SubReddit:"redditclone/r/:subreddit",Details:"redditclone/r/:subreddit/comments/:id/:title",User:"redditclone/u/:user",Search:"redditclone/search"}}};var $=function(){return Object(j.jsx)(a.default,{children:Object(j.jsx)(r.default,{linking:Z,children:Object(j.jsxs)(Y.Navigator,{screenOptions:{headerShown:!1},children:[Object(j.jsx)(Y.Screen,{name:"Home",component:V}),Object(j.jsx)(Y.Screen,{name:"SubReddit",component:G}),Object(j.jsx)(Y.Screen,{name:"Details",component:Q}),Object(j.jsx)(Y.Screen,{name:"User",component:K}),Object(j.jsx)(Y.Screen,{name:"Search",component:J})]})})})},ee=new F.QueryClient;function te(){return Object(j.jsx)(F.QueryClientProvider,{client:ee,children:Object(j.jsx)($,{})})}},253:function(e,t,n){e.exports=n(330)}},[[253,1,2]]]);
//# sourceMappingURL=app.590d5993.chunk.js.map
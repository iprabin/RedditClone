(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{243:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ee}));var a=n(345),r=n(344),i=n(0),o=n.n(i),d=n(5),s=n(6),l=n(27),c=n(64),u=n(57),f=n(67),h=n(342),b=n(8),m=[{label:"best",icon:"rocket"},{label:"hot",icon:"fire"},{label:"new",icon:"sun"},{label:"top",icon:"arrow-up"}],j=["today","week","month","year","all"],g=function(e){var t=e.text,n=e.onPress,a=e.selected,r=e.icon;return Object(b.jsx)(s.default,{style:{backgroundColor:a?"#495057":void 0,paddingHorizontal:10,borderRadius:15,paddingVertical:5,marginLeft:void 0==r?10:void 0},children:Object(b.jsxs)(f.default,{onPress:n,style:x.btn,children:[r&&Object(b.jsx)(h.default,{name:r,size:20,color:"#fff"}),Object(b.jsx)(l.default,{style:x.btnTxt,children:t})]})})},p=function(e){var t=e.onPress,n=e.selected,a=e.show,r=e.setShow,i=e.filter,o=e.setFilter;return Object(b.jsxs)(s.default,{style:x.container,children:[Object(b.jsxs)(s.default,{style:x.btnContainer,children:[m.map((function(e){return Object(b.jsx)(g,{icon:e.icon,onPress:function(){return t(e.label)},selected:n==e.label,text:e.label},e.label)})),"top"==n&&Object(b.jsx)(g,{text:i,onPress:function(){return r((function(e){return!e}))},selected:!0,icon:void 0})]}),a&&Object(b.jsx)(s.default,{style:x.filterContainer,children:j.map((function(e){return Object(b.jsx)(g,{text:e,onPress:function(){o(e),r(!1)},selected:i==e},e)}))})]})},x=d.default.create({container:{alignSelf:"center",paddingHorizontal:10,maxWidth:600,minHeight:45,maxHeight:100,minWidth:400},btnContainer:{flexDirection:"row",justifyContent:"space-between",backgroundColor:"#212529",alignItems:"center",paddingHorizontal:10,borderRadius:5,flex:1},subreddit:{fontSize:18,fontWeight:"600",textTransform:"capitalize",color:"#fff"},filterContainer:{flexDirection:"row",marginLeft:20,position:"absolute",zIndex:100,top:50,backgroundColor:"#212529",padding:5,borderRadius:10,borderWidth:1,borderColor:"#f5f5f5"},btnTxt:{fontWeight:"600",color:"#fff",fontSize:18,marginLeft:5,textTransform:"capitalize"},btn:{flexDirection:"row",alignItems:"center",justifyContent:"center"}}),y=n(44),O=n(114),v=n(343),S=n(37),w=n(346),C=n(79);function P(e){var t=Math.floor(((new Date).getTime()-new Date(1e3*e).getTime())/1e3),n=t/31536e3;return n>1?Math.floor(n)+" years":(n=t/2592e3)>1?Math.floor(n)+" months":(n=t/86400)>1?Math.floor(n)+" days":(n=t/3600)>1?Math.floor(n)+" hours":(n=t/60)>1?Math.floor(n)+" minutes":Math.floor(t)+" seconds"}var z=o.a.memo((function(e){var t=e.item,n=e.pressable,a=void 0===n||n,r=Object(S.useNavigation)(),i=t.data.thumbnail,d=2;t.data.preview&&(i=t.data.preview.images[0].source.url,d=t.data.preview.images[0].source.width/t.data.preview.images[0].source.height);var c="";t.data.secure_media&&t.data.secure_media.reddit_video&&(c=t.data.secure_media.reddit_video.fallback_url,a||(d=t.data.secure_media.reddit_video.width/t.data.secure_media.reddit_video.height));var u=o.a.useCallback((function(e){return r.navigate("Details",{id:e.data.id,subreddit:e.data.subreddit,title:e.data.title.replaceAll(" ","_")})}),[]),h="";t.data.secure_media_embed&&t.data.secure_media_embed.content&&t.data.secure_media_embed.content.split(" ").forEach((function(e){e.includes("src")&&(h=e.split('"')[1])}));return console.log(h),Object(b.jsxs)(s.default,{style:[k.container,{width:a?void 0:"90%",maxWidth:a?600:1e3}],children:[Object(b.jsxs)(s.default,{style:{flexDirection:"row",marginBottom:10},children:[Object(b.jsxs)(l.default,{style:{color:"#fff",fontSize:15},onPress:function(){return r.navigate("SubReddit",{subreddit:t.data.subreddit})},children:["r/",t.data.subreddit]}),Object(b.jsx)(l.default,{style:{color:"#fff",fontSize:15},children:" \u2022 "}),Object(b.jsxs)(l.default,{style:{color:"#fff",fontSize:15},onPress:function(){return r.navigate("User",{user:t.data.author})},children:["u/",t.data.author]}),Object(b.jsxs)(l.default,{style:{color:"#fff",fontSize:15},children:[" ",P(t.data.created_utc)]})]}),Object(b.jsx)(f.default,{onPress:function(){return a&&u(t)},activeOpacity:a?.6:1,children:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(l.default,{style:k.title,ellipsizeMode:"tail",numberOfLines:2,children:t.data.title}),Object(b.jsx)(l.default,{style:{color:"#fff"},children:t.data.selftext}),(""==c||a)&&""!=i&&""==h&&Object(b.jsxs)(s.default,{style:{position:"relative"},children:[Object(b.jsx)(y.default,{source:{uri:encodeURI(i)},style:[k.image,{aspectRatio:d,maxHeight:a?500:700}]}),""!=c&&Object(b.jsx)(s.default,{style:k.playBtn,children:Object(b.jsx)(v.default,{name:"controller-play",size:90,color:"#fff"})})]}),""!=c&&!a&&Object(b.jsx)(w.default,{source:{uri:c},useNativeControls:!0,isLooping:!0,isMuted:!0,shouldPlay:!0,resizeMode:C.ResizeMode.CONTAIN,videoStyle:{aspectRatio:d,width:"100%",maxHeight:700},style:{aspectRatio:d,width:"100%",maxHeight:700}}),""!=h&&Object(b.jsx)("iframe",{style:{minWidth:400,maxWidth:600,aspectRatio:1.5},src:h,allowFullScreen:!0})]})}),t.data.url&&Object(b.jsx)(l.default,{style:{color:"#fff"},onPress:function(){return O.default.openURL(t.data.url)},children:t.data.url})]})})),k=d.default.create({container:{marginTop:20,alignSelf:"center",minWidth:400,backgroundColor:"#212529",padding:20,borderRadius:10},title:{fontWeight:"600",fontSize:17,marginBottom:10,color:"#fff"},image:{width:"100%",resizeMode:"contain",alignSelf:"flex-start"},playBtn:{position:"absolute",alignSelf:"center",justifyContent:"center",height:"100%"}}),R=n(14),W=n.n(R),_=n(10),T=n.n(_),L=n(54),F=function(e){var t=e.subreddit,n=e.filter,a=e.timeFilter;return Object(L.useInfiniteQuery)([t,n,a,"post"],function(){var e=T()((function*(e){var r=e.pageParam,i=void 0===r?"":r,o="https://www.reddit.com/r/"+t+"/"+n+"/.json?raw_json=1&count=25";"top"==n&&(o+="&sort=top&t="+a),""!=i&&(o=o+"&after="+i);var d=yield fetch(o);return(yield d.json()).data}));return function(t){return e.apply(this,arguments)}}(),{getNextPageParam:function(e){var t;return null!=(t=e.after)&&t},retry:1,select:function(e){return{pageParams:e.pageParams,pages:e.pages.flatMap((function(e){return e.children}))}},keepPreviousData:!1,refetchOnWindowFocus:!1})},M=n(87),N=function(e){var t,n=e.subreddit,a=o.a.useState("best"),r=W()(a,2),i=r[0],d=r[1],c=o.a.useState(!1),f=W()(c,2),h=f[0],m=f[1],j=o.a.useState("today"),g=W()(j,2),x=g[0],y=g[1],O=F({subreddit:n,filter:i,timeFilter:x}),v=O.data,S=O.hasNextPage,w=O.fetchNextPage,C=o.a.useCallback((function(e){var t=e.item;return Object(b.jsx)(z,{item:t})}),[]),P=o.a.useCallback((function(e){return e.data.id}),[]),k=o.a.useCallback((function(e){return d(e)}),[]);return Object(b.jsx)(u.default,{style:I.container,children:Object(b.jsx)(M.FlashList,{ListHeaderComponent:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(l.default,{style:I.subreddit,children:n}),Object(b.jsx)(p,{selected:i,onPress:k,show:h,setShow:m,filter:x,setFilter:y}),Object(b.jsx)(s.default,{style:{marginTop:h?40:void 0}})]}),contentContainerStyle:I.contentContainer,data:null!=(t=null==v?void 0:v.pages)?t:[],estimatedItemSize:600,keyExtractor:P,renderItem:C,onEndReachedThreshold:.3,onEndReached:function(){S&&w()}})})},I=d.default.create({container:{flex:1,backgroundColor:"#343a40"},contentContainer:{paddingLeft:90,paddingRight:90,paddingBottom:90},subreddit:{textTransform:"capitalize",color:"#fff",fontWeight:"600",fontSize:26,minWidth:400,maxWidth:700,alignSelf:"center",marginVertical:10,paddingLeft:10}}),E=function(e){var t=e.id,n=e.subreddit,a=e.title;return Object(L.useQuery)([n,t,"comment"],T()((function*(){var e=yield fetch("https://www.reddit.com/r/"+n+"/comments/"+t+"/"+a+"/.json?raw_json=1"),r=yield e.json();return{post:r[0].data.children[0],comment:r[1].data.children}})))},H=function(e){var t=e.term;return Object(L.useInfiniteQuery)([t,"search"],function(){var e=T()((function*(e){var n=e.pageParam,a=void 0===n?"":n,r="https://www.reddit.com/subreddits/search.json?q="+t+"&raw_json=1&count=25";""!=a&&(r=r+"&after="+a);var i=yield fetch(r);return(yield i.json()).data}));return function(t){return e.apply(this,arguments)}}(),{getNextPageParam:function(e){var t;return null!=(t=e.after)&&t},retry:1,select:function(e){return{pageParams:e.pageParams,pages:e.pages.flatMap((function(e){return e.children}))}},keepPreviousData:!1})},D=function(e){var t=e.user,n=e.filter,a=e.timeFilter;return Object(L.useInfiniteQuery)([t,n,a,"user"],function(){var e=T()((function*(e){var r=e.pageParam,i=void 0===r?"":r,o="https://www.reddit.com/user/"+t+".json?raw_json=1&count=25";"top"==n&&(o+="&sort=top&t="+a),""!=i&&(o=o+"&after="+i);var d=yield fetch(o);return(yield d.json()).data}));return function(t){return e.apply(this,arguments)}}(),{getNextPageParam:function(e){var t;return null!=(t=e.after)&&t},retry:1,select:function(e){return{pageParams:e.pageParams,pages:e.pages.flatMap((function(e){return e.children}))}},keepPreviousData:!1})},B=function(e){var t=e.route.params,n=t.id,a=t.subreddit,r=t.title,i=E({title:r,id:n,subreddit:a}),o=i.data,d=i.isLoading,f=function(e,t,n,a){return Object(b.jsxs)(s.default,{style:{marginLeft:t,marginTop:10},children:[Object(b.jsx)(l.default,{style:{color:"#fff",fontWeight:"600",fontSize:15},adjustsFontSizeToFit:!0,numberOfLines:1,children:n}),Object(b.jsx)(l.default,{style:{color:"#fff",marginTop:3},children:e})]},a)};return Object(b.jsx)(u.default,{style:Q.container,children:!d&&Object(b.jsxs)(c.default,{contentContainerStyle:{paddingBottom:90},children:[Object(b.jsx)(z,{item:null==o?void 0:o.post,pressable:!1}),Object(b.jsxs)(s.default,{style:Q.itemContainer,children:[Object(b.jsx)(l.default,{style:{fontSize:18,color:"#fff",fontWeight:"900"},children:"Comments"}),function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t&&0!=t.length?(t.forEach((function(t){n.push(f(t.data.body,a,t.data.author,t.data.author_fullname+t.data.name)),t.data.replies&&e(t.data.replies.data.children,n,a+=10)})),n):null}(null==o?void 0:o.comment,[],0)]})]})})},Q=d.default.create({container:{flex:1,backgroundColor:"#343a40"},itemContainer:{marginTop:20,alignSelf:"center",minWidth:300,maxWidth:400,backgroundColor:"#212529",padding:20,borderRadius:10}}),U=function(){return Object(b.jsx)(N,{subreddit:"popular"})},V=n(123),A=function(){var e=o.a.useState("ios"),t=W()(e,2),n=t[0],a=t[1],r=H({term:n}),i=r.data,d=r.hasNextPage,c=r.fetchNextPage,f=Object(S.useNavigation)(),h=o.a.useCallback((function(e){var t=e.item;return Object(b.jsx)(s.default,{style:{marginTop:20,alignSelf:"center"},children:Object(b.jsx)(l.default,{style:J.title,onPress:function(){return f.navigate("SubReddit",{subreddit:t.data.display_name})},children:t.data.url})})}),[]),m=o.a.useCallback((function(e){return e.data.url}),[]);return Object(b.jsxs)(u.default,{style:J.container,children:[Object(b.jsx)(s.default,{style:{alignSelf:"center",marginTop:10},children:Object(b.jsx)(V.default,{style:J.input,placeholder:"Search Subreddit",onSubmitEditing:function(e){return a(e.nativeEvent.text)}})}),Object(b.jsx)(M.FlashList,{data:null==i?void 0:i.pages,contentContainerStyle:{paddingBottom:90},estimatedItemSize:50,keyExtractor:m,renderItem:h,onEndReachedThreshold:1.5,onEndReached:function(){return d&&n.length>0&&c()}})]})},J=d.default.create({container:{flex:1,backgroundColor:"#343a40"},input:{height:45,minWidth:400,maxWidth:600,backgroundColor:"#212529",paddingHorizontal:10,borderRadius:10,fontSize:18,color:"#fff"},title:{color:"#fff",minWidth:400,maxWidth:500,fontSize:18}}),q=function(e){var t=e.route.params.subreddit;return Object(b.jsx)(N,{subreddit:t})},G=function(e){var t,n=e.route.params.user,a=o.a.useState("best"),r=W()(a,2),i=r[0],d=r[1],c=o.a.useState(!1),f=W()(c,2),h=f[0],m=f[1],j=o.a.useState("today"),g=W()(j,2),x=g[0],y=g[1],O=D({user:n,filter:i,timeFilter:x}),v=O.data,S=O.hasNextPage,w=O.fetchNextPage,C=o.a.useCallback((function(e){var t=e.item;return Object(b.jsx)(z,{item:t})}),[]),P=o.a.useCallback((function(e){return e.data.id}),[]),k=o.a.useCallback((function(e){return d(e)}),[]);return Object(b.jsx)(u.default,{style:K.container,children:Object(b.jsx)(M.FlashList,{ListHeaderComponent:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(l.default,{style:K.subreddit,children:n}),Object(b.jsx)(p,{selected:i,onPress:k,show:h,setShow:m,filter:x,setFilter:y}),Object(b.jsx)(s.default,{style:{marginTop:h?40:void 0}})]}),contentContainerStyle:K.contentContainer,data:null!=(t=null==v?void 0:v.pages)?t:[],estimatedItemSize:600,keyExtractor:P,renderItem:C,onEndReachedThreshold:.3,onEndReached:function(){S&&w()}})})},K=d.default.create({container:{flex:1,backgroundColor:"#343a40"},contentContainer:{paddingLeft:90,paddingRight:90,paddingBottom:90},subreddit:{textTransform:"capitalize",color:"#fff",fontWeight:"600",fontSize:26,minWidth:400,maxWidth:700,alignSelf:"center",marginVertical:10,paddingLeft:10}}),X=Object(r.default)(),Y={prefixes:["http://localhost:19006/"],config:{screens:{Home:"",SubReddit:"/r/:subreddit",Details:"/r/:subreddit/comments/:id/:title",User:"/u/:user",Search:"/search"}}};var Z=function(){return Object(b.jsx)(a.default,{linking:Y,children:Object(b.jsxs)(X.Navigator,{screenOptions:{headerShown:!1},children:[Object(b.jsx)(X.Screen,{name:"Home",component:U}),Object(b.jsx)(X.Screen,{name:"SubReddit",component:q}),Object(b.jsx)(X.Screen,{name:"Details",component:B}),Object(b.jsx)(X.Screen,{name:"User",component:G}),Object(b.jsx)(X.Screen,{name:"Search",component:A})]})})},$=new L.QueryClient;function ee(){return Object(b.jsx)(L.QueryClientProvider,{client:$,children:Object(b.jsx)(Z,{})})}},253:function(e,t,n){e.exports=n(330)}},[[253,1,2]]]);
//# sourceMappingURL=app.de706f41.chunk.js.map